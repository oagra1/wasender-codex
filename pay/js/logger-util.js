var umd;!function(){var t={484:function(t,e){"use strict";class n extends class{constructor(t){var e,n;this.timer=null,this.time=10,this.count=10,this.arr=[],this.time=null!==(e=t.time)&&void 0!==e?e:10,this.count=null!==(n=t.count)&&void 0!==n?n:10,this.url="https://"+t.project+"."+t.host+"/logstores/"+t.logstore+"/track",this.opt=t,t.installUnloadHook&&"function"==typeof t.installUnloadHook&&t.installUnloadHook((()=>{this.platformSend(this.assemblePayload())}))}assemblePayload(t=this.arr){const e={__logs__:t};return this.opt.tags&&(e.__tags__=this.opt.tags),this.opt.topic&&(e.__topic__=this.opt.topic),this.opt.source&&(e.__source__=this.opt.source),JSON.stringify(e)}platformSend(t){this.opt.sendPayload&&"function"==typeof this.opt.sendPayload&&this.opt.sendPayload(this.url,t)}transString(t){let e={};for(let n in t)"object"==typeof t[n]?e[n]=JSON.stringify(t[n]):e[n]=String(t[n]);return e}sendImmediateInner(){this.arr&&this.arr.length>0&&(this.platformSend(this.assemblePayload()),null!=this.timer&&(clearTimeout(this.timer),this.timer=null),this.arr=[])}sendInner(){if(this.timer)this.arr.length>=this.count&&(clearTimeout(this.timer),this.timer=null,this.sendImmediateInner());else{const t=this;this.arr.length>=this.count||this.time<=0?this.sendImmediateInner():this.timer=setTimeout((function(){t.sendImmediateInner()}),1e3*this.time)}}send(t){const e=this.transString(t);this.arr.push(e),this.sendInner()}sendImmediate(t){const e=this.transString(t);this.arr.push(e),this.sendImmediateInner()}sendBatchLogs(t){const e=t.map((t=>this.transString(t)));this.arr.push(...e),this.sendInner()}sendBatchLogsImmediate(t){const e=t.map((t=>this.transString(t)));this.arr.push(...e),this.sendImmediateInner()}}{constructor(t){super(Object.assign({},t,{installUnloadHook:t=>{window.addEventListener("beforeunload",(()=>{t()}))},sendPayload:(t,e)=>{!function(t,e){try{(function(t,e){return!(!navigator||!navigator.sendBeacon)&&navigator.sendBeacon(`${t}?APIVersion=0.6.0`,e)})(t,e)||function(t,e){const n=new window.XMLHttpRequest;n.open("POST",t,!0),n.setRequestHeader("x-log-apiversion","0.6.0"),n.setRequestHeader("x-log-bodyrawsize",e.length.toString());const o=new Blob([e],{type:"application/x-protobuf"});n.send(o)}(t,e)}catch(e){window&&window.console&&"function"==typeof window.console.error&&(console.error("Failed to log to ali log service because of this exception:\n"+e),console.error("Failed log data:",t))}}(t,e)}}))}}var o,s;o=window,s=n,o["SLS_Tracker"]=s,e.ZP=n},325:function(t,e,n){t.exports=n.g.logger=n(775)},775:function(t,e,n){"use strict";n.r(e),n.d(e,{logger:function(){return o}});const o=new(n(484).ZP)({host:"us-west-1.log.aliyuncs.com",project:"extension-us",time:.05,count:1,logstore:"scrm-wapi-sender"})}},e={};function n(o){var s=e[o];if(void 0!==s)return s.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,n),i.exports}n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o=n(325);umd=o}();